{% extends "horizon/common/_modal_form.html" %}
{% load i18n %}

{% block modal-header %}
<h2>Activate Token</h2>
    <p/>
    <div align="center"><span class="label label-info">Please scan this QRCode to begin setup.</span></div>
    <p/>
    <div align="center"><img src="{{ form.seed.value }}/qr" width="200" height="200"></div>
    <p/>
    <div class="panel panel-warning">
      <div class="panel-heading">
        <h3 class="panel-title">Attention!</h3>
      </div>
      <div class="panel-body">
	      <h5 style="color:Tomato;">1. After 2FA enabled successful, when you login to Horizon: [password field] = [user password] + [otp token]. For example: [user password]=P4ssWord, [otp token]=121121, then password field should be: P4ssWord121121</h5>
	      <h5>2. If you have problems with authentication/verification, make sure your device time is synced with an NTP server and let 30 seconds pass before retrying.</h5></div>
    </div>
    <p/>

{% endblock %}

{% block modal-body-right %}
    <h3>{% trans "Token Validation Form" %}</h3>
    <p>{% trans "Scan the QRCode with yout mobile authentication device (Google Authenticator is fine) and the verify the TOTP token." %}</p>
    <p>{% trans "Once the token has been verified, TOTP Two Factor Authentication will be enabled for your user." %}</p>
    <script type="text/javascript">
        if (typeof horizon.user !== 'undefined') {
            horizon.user.init();
        } else {
            addHorizonLoadEvent(function () {
                horizon.user.init();
            });
        }
    </script>
{% endblock %}
